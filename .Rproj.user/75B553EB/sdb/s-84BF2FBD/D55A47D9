{
    "collab_server" : "",
    "contents" : "#' \\code{block_bootstrap} Performs a block bootstrap on the functional data f_data with block size b.\n#'\n#' @param f_data the functional data matrix with observed functions in the columns\n#' @param b the block size (of each block in each bootstrap sample)\n#' @param B the number of bootstraps samples\n#' @param moving boolean value specyifing wheter the block bootstrap should be moving or not. A moving black\n#' bootstrap samples individual functional obervations and adds on the consequent block, rather than sampling\n#' blocks of the data.\n#' @return Returns a list of B elements, each element being a block bootstrap sample in the same format\n#' as the original functional data f_data.\n#'\n#' @export\n#'\nblock_bootsrap <- function(f_data, b, B = 300, moving = FALSE) {\n  N <- NCOL(f_data)\n  if (b > N) {\n    stop(\"Please select a block size that is less than or equal to the sample size of\n         the functional data. It is best to select a block size that evenly divides the\n         sample size.\")\n  } else if (b < 1) {\n    stop(\"The block size must be a positive integer.\")\n  } else if (B < 1) {\n    stop(\"The number of bootstrap samples must be a positive integer.\")\n  }\n  blocks <- list()\n  M <- floor(N / b)\n  for (s in 1:M) {\n    blocks[[s]] <- (b*(s - 1) + 1):(b*s)\n  }\n  bootstrap_samples <- list()\n  for (j in 1:B) {\n    if (moving == FALSE) {\n      samples <- sample(1:M, M, replace = TRUE)\n      bootstrapped_data <- f_data[,blocks[[samples[1]]]]\n      for (i in samples[-1]) {\n        bootstrapped_data <- cbind(bootstrapped_data, f_data[,blocks[[samples[i]]]])\n      }\n    } else if (moving == TRUE) {\n      samples <- sample(1:(N - b), M, replace = TRUE)\n      bootstrapped_data <- f_data[, samples[1]:(samples[1] + b)]\n      for (i in 2:M) {\n        bootstrapped_data <- cbind(bootstrapped_data, f_data[,samples[i]:(samples[i] + b)])\n      }\n    }\n    bootstrap_samples[[j]] <- bootstrapped_data\n  }\n  bootstrap_samples\n}\n",
    "created" : 1560213156280.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "374121145",
    "id" : "D55A47D9",
    "lastKnownWriteTime" : 1559608405,
    "last_content_update" : 1559608405,
    "path" : "~/wwntests/R/block_bootstrap.R",
    "project_path" : "R/block_bootstrap.R",
    "properties" : {
        "tempName" : "Untitled2"
    },
    "relative_order" : 8,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}